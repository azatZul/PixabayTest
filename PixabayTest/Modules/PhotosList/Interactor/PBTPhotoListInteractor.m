//// PBTPhotoListInteractor// PixabayTest////  Created by azat on 27/05/16.//  Copyright (c) 2016. All rights reserved.//#import "PBTPhotoListInteractor.h"#import "PBTPhotoListInteractorOutput.h"#import "PBTPhotosService.h"#import "PBTPhotosQueryResponse.h"#import "PBTRequest.h"#import <EXTScope.h>static const NSInteger PBTPhotosPerPageCount = 20;@interface PBTPhotoListInteractor ()@property (nonatomic, weak) id <PBTRequest> photosLoadRequest;@end@implementation PBTPhotoListInteractor- (void)fetchPageOfPhotosFrom:(NSInteger)from query:(NSString *)query{    NSInteger page = from / PBTPhotosPerPageCount + 1;    [self.photosLoadRequest cancel];    @weakify(self);    void (^success)(PBTPhotosQueryResponse *) = ^(PBTPhotosQueryResponse *response)    {        @strongify(self);        [self.output photoListPageDidFetched:response.hits allPhotosCount:response.total];    };    void (^failure)(NSError *) = ^(NSError *error)    {        @strongify(self);        if (error.code != NSURLErrorCancelled)        {            [self.output photoListPageDidFailedWithError:error];        }    };    self.photosLoadRequest = [self.photosService loadPhotosListWithPhotosInPageQuery:query                                                                             perPage:PBTPhotosPerPageCount                                                                                page:page                                                                             success:success                                                                             failure:failure];}@end