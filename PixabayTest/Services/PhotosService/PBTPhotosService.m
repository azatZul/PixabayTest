//// PBTPhotosService// PixabayTest////  Created by azat on 26/05/16.//  Copyright (c) 2016. All rights reserved.//#import "PBTPhotosService.h"#import "PBTRequest.h"#import "PBTPhotosNetworkClient.h"#import "PBTPhotosQueryResponseMapper.h"#import "PBTPhotosQueryResponse.h"#import <EXTScope.h>@interface PBTPhotosService ()@end@implementation PBTPhotosService- (id <PBTRequest>)loadPhotosListWithQuery:(NSString *)query                                   success:(PTBPhotosSuccessHandler)success                                      page:(NSUInteger)page                              photosInPage:(NSUInteger)perPage                                   failure:(PTBFailureHandler)failure{    @weakify(self);    void (^handler)(NSError *, NSDictionary *) = ^(NSError *error, NSDictionary *response)    {        @strongify(self);        if (error && failure)        {            failure(error);            return;        }        PBTPhotosQueryResponse *queryResult = [self.mapping queryResponseFromDictionary:response];        if (success)        {            success(queryResult);        }    };    return  [self.networkClient fetchPhotosDataWithQuery:query                                            page:page                                         perPage:perPage                                         handler:handler];}@end