//// PBTPhotosNetworkClient// PixabayTest////  Created by azat on 26/05/16.//  Copyright (c) 2016. All rights reserved.//#import "PBTPhotosNetworkClient.h"#import "PBTRequest.h"#import "PBTRoutesBuilder.h"#import "AFHTTPSessionManager.h"@interface PBTPhotosNetworkClient ()@property (nonatomic, strong) PBTRoutesBuilder *routesBuilder;@property (nonatomic, strong) AFHTTPSessionManager *sessionManager;@end@implementation PBTPhotosNetworkClient- (id <PBTRequest>)fetchPhotosDataWithQuery:(NSString *)query                                       page:(NSUInteger)page                                    perPage:(NSUInteger)perPage                                    handler:(PBTNetworkResponseHandler)handler{    if (!query)    {        NSString *message = @"Nil query passed!";        NSLog(@"%@", message);        return nil;    }    NSDictionary *params = @{            @"q": query,            @"key" : @"",            @"page" : @(page),            @"per_page" : @(perPage)    };    void (^successBlock)(NSURLSessionDataTask *, id) = ^(NSURLSessionDataTask *task, id responseObject)    {        if (handler)        {            handler(nil, responseObject);        }    };    void (^failureBlock)(NSURLSessionDataTask *, NSError *) = ^(NSURLSessionDataTask *task, NSError *error)    {        if (handler)        {            handler(error, nil);        }    };    return (id <PBTRequest>)[self.sessionManager GET:self.sessionManager.baseURL.path                                          parameters:params                                            progress:nil                                             success:successBlock                                             failure:failureBlock];}@end