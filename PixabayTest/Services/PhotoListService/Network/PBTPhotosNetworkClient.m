//// PBTPhotosNetworkClient// PixabayTest////  Created by azat on 26/05/16.//  Copyright (c) 2016. All rights reserved.//#import "PBTPhotosNetworkClient.h"#import "PBTRequest.h"#import "AFHTTPSessionManager.h"#import "PBTNetworkConstants.h"@interface PBTPhotosNetworkClient ()@property (nonatomic, strong) AFHTTPSessionManager *sessionManager;@end@implementation PBTPhotosNetworkClient- (id <PBTRequest>)fetchPhotosDataWithQuery:(NSString *)query                                       page:(NSUInteger)page                                    perPage:(NSUInteger)perPage                                    handler:(PBTNetworkResponseHandler)handler{    NSMutableDictionary *params = [@{            @"key" : PBTAPIKey,            @"page" : @(page),            @"per_page" : @(perPage)    } mutableCopy];    if (query)    {        params[@"q"] = query;    }    void (^successBlock)(NSURLSessionDataTask *, id) = ^(NSURLSessionDataTask *task, id responseObject)    {        if (handler)        {            handler(nil, responseObject);        }    };    void (^failureBlock)(NSURLSessionDataTask *, NSError *) = ^(NSURLSessionDataTask *task, NSError *error)    {        NSLog(@"Fetching photos failed:%@", error.localizedDescription);        if (handler)        {            handler(error, nil);        }    };    NSLog(@"Fetching photos...");    return (id <PBTRequest>)[self.sessionManager GET:self.sessionManager.baseURL.path                                          parameters:params                                            progress:nil                                             success:successBlock                                             failure:failureBlock];}@end