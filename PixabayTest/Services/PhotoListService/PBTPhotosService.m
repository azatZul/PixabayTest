//// PBTPhotosService// PixabayTest////  Created by azat on 26/05/16.//  Copyright (c) 2016. All rights reserved.//#import "PBTPhotosService.h"#import "PBTRequest.h"#import "PBTPhotosNetworkClient.h"#import "PBTPhotosQueryResponseMapper.h"#import "PBTPhotosQueryResponse.h"#import <EXTScope.h>@interface PBTPhotosService ()@property (nonatomic, strong, readwrite) PBTPhotosNetworkClient *networkClient;@property (nonatomic, strong, readwrite) PBTPhotosQueryResponseMapper *mapping;@end@implementation PBTPhotosService- (id <PBTRequest>)loadPhotosListWithPhotosInPageQuery:(NSString *)query                                               perPage:(NSInteger)perPage                                                  page:(NSInteger)page                                               success:(PTBPhotosSuccessHandler)success                                               failure:(PTBFailureHandler)failure{    @weakify(self);    void (^handler)(NSError *, NSDictionary *) = ^(NSError *error, NSDictionary *response)    {        @strongify(self);        if (error && failure)        {            failure(error);            return;        }        PBTPhotosQueryResponse *queryResult = [self.mapping queryResponseFromDictionary:response];        NSLog(@"%u photos fetched", queryResult.hits.count);        if (success)        {            success(queryResult);        }    };    return  [self.networkClient fetchPhotosDataWithQuery:query                                            page:page                                         perPage:perPage                                         handler:handler];}@end